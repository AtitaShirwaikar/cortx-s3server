s3server:
  post_install:
    script: /opt/seagate/s3/install/setup_s3.sh
    args:
      - --configldap
      - --postdependency
      - --ldapreplication
      - --olcserverid 1
      - --eesnode1 <IP address of node 1>
      - --eesnode2 <IP address of node 2>
      - --s3backgrounddelete <node1|node2 if rabbitmq is clustered>
      - --node1 <IP address of node 1>
      - --node2 <IP address of node 2>
  init:
    script: /opt/seagate/s3/install/setup_s3.sh
    args:
      - --setupjenkinsyumrepo
      - --installdependency
      - --purgeconfigldap
      - --ldapreplication
      - --olcserverid 1
      - --eesnode1 <IP address of node 1>
      - --eesnode2 <IP address of node 2>
  config:
    script: /opt/seagate/s3/install/setup_s3.sh
    args:
      - --configldap
      - --ldapreplication
      - --olcserverid 1
      - --eesnode1 <IP address of node 1>
      - --eesnode2 <IP address of node 2>

      # TODO : Need to setup test UT's or ST's
  test:
    script: /opt/seagate/s3/install/setup_s3.sh
    args:
      - --test
  reset:
    script: /opt/seagate/s3/install/setup_s3.sh
    args:
      - --purgeconfigldap
# Script path used by CSM to generate s3 support bundle
support_bundle:
  - sh /opt/seagate/s3/scripts/s3_bundle_generate.sh

s3cmd_spec.py :

What does it test:
- create bucket
- List buckets
- Create objects of size 3k, 8k and 700k.
- Download objects of size 3k, 8k and 700k.
- List objects
- List objects with specific starting pattern
- Delete objects.
- Delete Buckets.
- All above under 2 scenarios: pathstyle s3 uri and virtualhoststyle s3 uri

auth_spec.py :

What does it test:
- Create account
- Create, Delete, List and Update User
- Create, Delete, List and Update Access Key
- Create, Delete and List Roles
- Create, Delete, List and Update SAML Provider
- Get Federation Token.

Assumptions:
You have clean setup without a test bucket name 'seagatebucket', 'seagate-bucket'
and 'SEAGATEBUCKET123'.
Following access key pair is assumed, if your setup has different,
please update below mentioned s3cfg files.

System tests for auth server uses the python client 'pyclient'.
Ensure you have all the dependencies installed for pyclient.

Python Version 3.5 (package name - python3.5) and virtualenv are required.

How to setup virtual env?
- Run setup.sh as root user to setup virtual env with dependencies.
Note - virtual env directory "mero_st" gets created in current directory.

            Or

- Install virtual env via pip
sudo pip install virtualenv

- Go to the directory where you want to create virtual environment directory.
Ex - cd /home/seagate

- Create a new virtual env called mero_st which uses python3.5
sudo virtualenv -p /usr/local/bin/python3.5 mero_st

- Change the python source via virtualenv
sudo source mero_st/bin/activate

- To deacticate virtual env run
sudo deactivate mero_st

Dependencies:
Run the following to install the dependencies in the following order.
sudo pip install python-dateutil==2.4.2
sudo pip install pyyaml==3.11
sudo pip install xmltodict==0.9.2
sudo pip install boto3==1.2.2
sudo pip install botocore==1.3.8
sudo pip install scripttest==1.3

Build Jcloud and Jclient and copy jcloud.jar and jclient.jar to the
current directory i.e st/clitests from the respective build directories.


How to run?
- Ensure you have s3server, auth server and mero running with test data.
- Update access keys in pathstyle.s3cfg and virtualhoststyle.s3cfg if required.
- Update /etc/hosts file to add following entry for tests.
  127.0.0.1 seagatebucket.s3.seagate.com s3.seagate.com
  127.0.0.1 seagate-bucket.s3.seagate.com seagatebucket123.s3.seagate.com seagate.bucket.s3.seagate.com
  127.0.0.1 iam.seagate.com sts.seagate.com
- Ensure you have sourced mero_st (python version 3.5) with virtualenv.
- cd to clitests directory
- To verify setup and execute standard systests (auth, s3cmd, jclient and jcloud )
- run runallsystest.sh
- To execute system tests as standalone
- run $python auth_spec.py
- run $python s3cmd_spec.py
- run $python jclient_spec.py
- run $python jcloud_spec.py

Note - To get execution time in milli seconds (parsable format), make the
following change in the test script (ex - s3cmd_spec.py) before running the tests
set
   Config.time_readable_format = False

APIs supported
- Create account
- Create, Delete, List and Update User
- Create, Delete, List and Update Access Key
- Create, Delete and List Roles
- Create, Delete, List and Update SAML Provider
- Get Federation Token.
- Assume role with SAML.

Python Version 3.5 and "virtualenv" are required.

How to setup virtual env?
- Run ./setupenv.sh

OR manually perform below steps

- Install virtual env via pip
sudo pip install virtualenv

- Go to the directory where you want to create virtual environment directory.
Ex - cd /home/seagate

- Create a new virtual env called mero_st which uses python3.5
sudo virtualenv -p /usr/local/bin/python3.5 mero_st

- Change the python source via virtualenv
sudo source mero_st/bin/activate

- To deacticate virtual env run
sudo deactivate mero_st

Dependencies:
Required boto3, botocore, pyyaml, xmltodict.
- sudo pip install pyyaml==3.11 xmltodict==0.9.2 boto3==1.2.2 botocore==1.3.8

Update /etc/hosts:
Add the following entries to /etc/hosts.
127.0.0.1    iam.seagate.com
127.0.0.1    sts.seagate.com
127.0.0.1    s3.seagate.com

Usage:
(Before running pyclient, activate python3.5 via virtual env and go to mero/fe/s3/auth-utils/pyclient directory.)

python pyclient <command> <options>

Ex -

Create account
python pyclient CreateAccount -n "myaccount"

Create user
python pyclient CreateUser -n "myUser" --access_key "1234" --secret_key "ABCD12"

Help:
You use --help option to view available commands and options.

python pyclient --help

SAML commands (for debugging)
- LDAP search
ldapsearch -b "dc=s3,dc=seagate,dc=com" -x -w seagate -D "cn=admin,dc=seagate,dc=com"

- Ldap Delete all entries
ldapdelete -x -w seagate -D "cn=admin,dc=seagate,dc=com" -r "dc=seagate,dc=com"

- LDAP Add entries from ldap-init script
ldapadd -w seagate -x -D "cn=admin,dc=seagate,dc=com" -f ldap-init.ldif
